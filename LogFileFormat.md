Tiny Logger's Log File Format
=============================


## Introduction ##

此檔案格式是為 tinylog 設計，並由其所使用的訊息記錄檔案格式。
本檔案格式旨在提供一個簡單易懂、容易擴充，並且同時適合由人眼和程式解析的記錄檔格式。


## Limitation ##

由於為了滿足人眼閱讀以及程式解析的需求，本檔案格式使用了部份 ASCII 控制碼作為記錄的區隔符號。
因此，其所酬載的訊息便不能含有 ASCII 控制碼，否則會為檔案的解析使用帶來困擾；
若使用者所傳入的記錄字串內含有不可接受的字元，
則寫入訊息記錄檔的工具應檢查並將之剔除，後正常寫入其餘資料。


## File Format ##

訊息記錄檔的格式由以下幾個規則構成：

* 訊息記錄檔為一個文字檔案，採用 ASCII 或其衍生編碼。
* 檔案內無檔頭檔尾，所有的訊息記錄 (records) 前後排列成為檔案內文的全部。
* 每個單一訊息記錄 (record) 以一個 ASCII LF (0x0A) 符號做為結尾。
* 所有的訊息記錄需依寫入順序排序，先寫入檔案的在前，後寫入檔案的在後。

檔案內容示意如下：

    Record1<LF>Record2<LF>Record3<LF>...<LF>RecordN<LF>


## Record Format ##

單一的訊息記錄由多個訊息項目 (record item) 前後排列組成，
訊息項目之間由一個 ASCII TAB (0x09) 符號做為分隔，示意如下：

    Item1<TAB>Item2<TAB>Item3<TAB>...<TAB>ItemN<LF>

一個訊息記錄應含有一個以上、種類不同的訊息項目(以項目標籤為區分依據)。

訊息記錄無必須攜帶的訊息項目，也無訊息項目排序的要求；
但為便利人眼的閱讀，建議訊息記錄檔案產生者應盡量在單一檔案裡統一所攜帶的訊息項目及其排序。


## Record Item Format ##

單一的訊息項目由兩個部份組成：訊息項目標籤在前、以及訊息項目內文在後，並以一個冒號做為分隔，
示意如下：

    tag:contant

或是

    tag: content

在冒號的後面建議(非強制性)加上一個空白，以利人眼的閱讀；
但冒號前請勿填充空白等符號，以利程式解析。


## Item Tags and Data

單一訊息項目以標籤做為其所攜帶訊息種類的識別，本檔案格式所支援的訊息標籤及其訊息格式列表如下：

| Tag  | Description |
|------|-------------|
| time | 此訊息記錄的產生時間，可為 UTC time 或 local time，以實際的使用約定為據。格式為 YYYY/MM/DD HH:MM:SS |
| mod  | 產生此訊息記錄的模組名稱 |
| func | 產生此訊息記錄的函式名稱 |
| proc | 產生此訊息記錄的行程 ID，格式為 hexadecimal number。 |
| thrd | 產生此訊息記錄的執行緒 ID，格式為 hexadecimal number。 |
| lev  | 此訊息的級別，為一 ASCII 大寫字串，可為下列項目之其一(一層級高低排序)：FAIL/ERROR/WARN/NOTE/INFO/DEBUG |
| msg  | 對與此訊息的主要文字描述，為 ASCII 或其衍生編碼的字串，不得含有 ASCII 控制碼。 |